<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Clock Rainbow</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">Time Base</a></li>
            <li><a href="about.html">My Story</a></li>
            <li><a href="privacy-policy.html">Guard Line</a></li>
            <li><a href="contact.html">Reach Out</a></li>
            <li><a href="guides.html">Help Zone</a></li>
            <li><a href="converter.html">Zone Shift</a></li>
            <li><a href="blog.html">Zone Stories</a></li>
        </ul>
    </nav>
    <div class="hero-section">
        <h1>World Clock Rainbow üåà</h1>
        <p>Check global times and weather at a glance! üïí A simple tool for meetings and travel, built by a newbie (me!) with Grok AI‚Äîand we‚Äôre teaming up with AI to keep adding more!</p>
    </div>
    <div id="filter-buttons"></div>
    <div id="search-container">
        <input type="text" id="city-search" placeholder="Search for a city..." list="city-suggestions">
        <button id="search-btn">üîç</button>
        <datalist id="city-suggestions"></datalist>
    </div>
    <div id="clocks-container"></div>
    <div id="load-more-container">
        <button id="load-more">Load More</button>
    </div>
    <div class="qna-section">
        <h2>Frequently Asked Questions</h2>
        <div class="accordion">
            <div class="accordion-header">How do I know the times are accurate?</div>
            <div class="accordion-content">
                <p>The times are based on your device‚Äôs clock and time zone offsets. Make sure your device‚Äôs time is correct for the best accuracy! üïí</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">Why isn‚Äôt the weather showing for some cities?</div>
            <div class="accordion-content">
                <p>We fetch weather from an external API. If it‚Äôs down or the city‚Äôs data isn‚Äôt available, you might see "N/A." We‚Äôll keep trying! üå¶Ô∏è</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">How can I use the clocks to plan my day across time zones?</div>
            <div class="accordion-content">
                <p>Select your desired cities on the homepage, and use the displayed times to schedule your activities, meetings, or calls. The weather info can also help you plan your day! üìÖ</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">How often does the weather update?</div>
            <div class="accordion-content">
                <p>Weather updates every 30 minutes to save on API calls. You‚Äôll always have fresh data without overloading the system! ‚òÄÔ∏è</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">Why do clocks overlap when I hover over them?</div>
            <div class="accordion-content">
                <p>Hovering zooms in for a better view, but clocks may overlap if they‚Äôre close. It‚Äôs a fun design choice to make things interactive! üñ±Ô∏è</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">Does this account for daylight saving time (DST)?</div>
            <div class="accordion-content">
                <p>Not yet‚Äîour clocks use standard offsets. Use the Time Zone Converter for DST adjustments! üåû</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">What should I do if the weather data isn‚Äôt loading?</div>
            <div class="accordion-content">
                <p>Try refreshing the page, as the issue might be due to a temporary API outage. If it persists, let us know via the Contact Us page, and we‚Äôll look into it! üåßÔ∏è</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">How do I use the Time Zone Converter?</div>
            <div class="accordion-content">
                <p>Go to the Converter page, pick your cities, and enter a time. We‚Äôll show you the matching times instantly! ‚è∞</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">Why are some flags missing?</div>
            <div class="accordion-content">
                <p>Flags come from an external service. If it‚Äôs down or a flag code is wrong, they might not show. Let us know if you spot an issue! üö©</p>
            </div>
        </div>
        <div class="accordion">
            <div class="accordion-header">Can I share the clock times with friends?</div>
            <div class="accordion-content">
                <p>There‚Äôs no direct share button yet, but you can screenshot the clocks and send them. We might add sharing soon! üì∏</p>
            </div>
        </div>
    </div>
    <div class="faq-section">
        <h2>FAQ</h2>
        <p><strong>How does this help?</strong> Sync your meetings or trips with global clocks and weather‚Äîeasy peasy!</p>
        <p><strong>Who made this?</strong> A computer newbie with 4-year-old English skills, powered by Grok AI!</p>
    </div>
    <script>
        const cities = [
            // North America
            { name: "New York", lat: 40.7128, lon: -74.0060, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "London", lat: 51.5074, lon: -0.1278, offset: 1, flag: "gb", continent: "Europe" },
            // Asia
            { name: "Tokyo", lat: 35.6762, lon: 139.6503, offset: 9, flag: "jp", continent: "Asia" },
            // South America
            { name: "Sao Paulo", lat: -23.5505, lon: -46.6333, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Cape Town", lat: -33.9249, lon: 18.4241, offset: 2, flag: "za", continent: "Africa" },
            // Oceania
            { name: "Sydney", lat: -33.8688, lon: 151.2093, offset: 10, flag: "au", continent: "Oceania" },
            // North America
            { name: "Los Angeles", lat: 34.0522, lon: -118.2437, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Paris", lat: 48.8566, lon: 2.3522, offset: 2, flag: "fr", continent: "Europe" },
            // Asia
            { name: "Seoul", lat: 37.5665, lon: 126.9780, offset: 9, flag: "kr", continent: "Asia" },
            // South America
            { name: "Buenos Aires", lat: -34.6037, lon: -58.3816, offset: -3, flag: "ar", continent: "South America" },
            // Africa
            { name: "Nairobi", lat: -1.2921, lon: 36.8219, offset: 3, flag: "ke", continent: "Africa" },
            // Oceania
            { name: "Melbourne", lat: -37.8136, lon: 144.9631, offset: 10, flag: "au", continent: "Oceania" },
            // North America
            { name: "Toronto", lat: 43.6532, lon: -79.3832, offset: -4, flag: "ca", continent: "North America" },
            // Europe
            { name: "Berlin", lat: 52.5200, lon: 13.4050, offset: 2, flag: "de", continent: "Europe" },
            // Asia
            { name: "Beijing", lat: 39.9042, lon: 116.4074, offset: 8, flag: "cn", continent: "Asia" },
            // South America
            { name: "Rio de Janeiro", lat: -22.9068, lon: -43.1729, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Lagos", lat: 6.5244, lon: 3.3792, offset: 1, flag: "ng", continent: "Africa" },
            // Oceania
            { name: "Auckland", lat: -36.8485, lon: 174.7633, offset: 12, flag: "nz", continent: "Oceania" },
            // North America
            { name: "Chicago", lat: 41.8781, lon: -87.6298, offset: -5, flag: "us", continent: "North America" },
            // Europe
            { name: "Moscow", lat: 55.7558, lon: 37.6173, offset: 3, flag: "ru", continent: "Europe" },
            // Asia
            { name: "Dubai", lat: 25.2048, lon: 55.2708, offset: 4, flag: "ae", continent: "Asia" },
            // South America
            { name: "Lima", lat: -12.0464, lon: -77.0428, offset: -5, flag: "pe", continent: "South America" },
            // Africa
            { name: "Cairo", lat: 30.0444, lon: 31.2357, offset: 2, flag: "eg", continent: "Africa" },
            // Oceania
            { name: "Perth", lat: -31.9505, lon: 115.8605, offset: 8, flag: "au", continent: "Oceania" },
            // North America
            { name: "Miami", lat: 25.7617, lon: -80.1918, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Istanbul", lat: 41.0082, lon: 28.9784, offset: 3, flag: "tr", continent: "Europe" },
            // Asia
            { name: "Singapore", lat: 1.3521, lon: 103.8198, offset: 8, flag: "sg", continent: "Asia" },
            // South America
            { name: "Bogota", lat: 4.7110, lon: -74.0721, offset: -5, flag: "co", continent: "South America" },
            // Africa
            { name: "Johannesburg", lat: -26.2041, lon: 28.0473, offset: 2, flag: "za", continent: "Africa" },
            // Oceania
            { name: "Brisbane", lat: -27.4698, lon: 153.0251, offset: 10, flag: "au", continent: "Oceania" },
            // North America
            { name: "Vancouver", lat: 49.2827, lon: -123.1207, offset: -7, flag: "ca", continent: "North America" },
            // Europe
            { name: "Madrid", lat: 40.4168, lon: -3.7038, offset: 2, flag: "es", continent: "Europe" },
            // Asia
            { name: "Hong Kong", lat: 22.3193, lon: 114.1694, offset: 8, flag: "hk", continent: "Asia" },
            // South America
            { name: "Santiago", lat: -33.4489, lon: -70.6693, offset: -4, flag: "cl", continent: "South America" },
            // Africa
            { name: "Accra", lat: 5.6037, lon: -0.1870, offset: 0, flag: "gh", continent: "Africa" },
            // Oceania
            { name: "Honolulu", lat: 21.3069, lon: -157.8583, offset: -10, flag: "us", continent: "Oceania" },
            // North America
            { name: "Mexico City", lat: 19.4326, lon: -99.1332, offset: -5, flag: "mx", continent: "North America" },
            // Europe
            { name: "Rome", lat: 41.9028, lon: 12.4964, offset: 2, flag: "it", continent: "Europe" },
            // Asia
            { name: "Bangkok", lat: 13.7563, lon: 100.5018, offset: 7, flag: "th", continent: "Asia" },
            // South America
            { name: "Quito", lat: -0.1807, lon: -78.4678, offset: -5, flag: "ec", continent: "South America" },
            // Africa
            { name: "Algiers", lat: 36.7372, lon: 3.0870, offset: 1, flag: "dz", continent: "Africa" },
            // Oceania
            { name: "Wellington", lat: -41.2865, lon: 174.7762, offset: 12, flag: "nz", continent: "Oceania" },
            // North America
            { name: "San Francisco", lat: 37.7749, lon: -122.4194, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Amsterdam", lat: 52.3676, lon: 4.9041, offset: 2, flag: "nl", continent: "Europe" },
            // Asia
            { name: "Mumbai", lat: 19.0760, lon: 72.8777, offset: 5.5, flag: "in", continent: "Asia" },
            // South America
            { name: "La Paz", lat: -16.5000, lon: -68.1500, offset: -4, flag: "bo", continent: "South America" },
            // Africa
            { name: "Casablanca", lat: 33.5731, lon: -7.5898, offset: 1, flag: "ma", continent: "Africa" },
            // Oceania
            { name: "Christchurch", lat: -43.5320, lon: 172.6362, offset: 12, flag: "nz", continent: "Oceania" },
            // North America
            { name: "Seattle", lat: 47.6062, lon: -122.3321, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Vienna", lat: 48.2082, lon: 16.3738, offset: 2, flag: "at", continent: "Europe" },
            // Asia
            { name: "Delhi", lat: 28.7041, lon: 77.1025, offset: 5.5, flag: "in", continent: "Asia" },
            // South America
            { name: "Asuncion", lat: -25.2637, lon: -57.5759, offset: -4, flag: "py", continent: "South America" },
            // Africa
            { name: "Tunis", lat: 36.8065, lon: 10.1815, offset: 1, flag: "tn", continent: "Africa" },
            // Oceania
            { name: "Adelaide", lat: -34.9285, lon: 138.6007, offset: 9.5, flag: "au", continent: "Oceania" },
            // North America
            { name: "Boston", lat: 42.3601, lon: -71.0589, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Stockholm", lat: 59.3293, lon: 18.0686, offset: 2, flag: "se", continent: "Europe" },
            // Asia
            { name: "Jakarta", lat: -6.2088, lon: 106.8456, offset: 7, flag: "id", continent: "Asia" },
            // South America
            { name: "Montevideo", lat: -34.9011, lon: -56.1645, offset: -3, flag: "uy", continent: "South America" },
            // Africa
            { name: "Tripoli", lat: 32.8872, lon: 13.1913, offset: 2, flag: "ly", continent: "Africa" },
            // Oceania
            { name: "Darwin", lat: -12.4634, lon: 130.8456, offset: 9.5, flag: "au", continent: "Oceania" },
            // North America
            { name: "Houston", lat: 29.7604, lon: -95.3698, offset: -5, flag: "us", continent: "North America" },
            // Europe
            { name: "Oslo", lat: 59.9139, lon: 10.7522, offset: 2, flag: "no", continent: "Europe" },
            // Asia
            { name: "Manila", lat: 14.5995, lon: 120.9842, offset: 8, flag: "ph", continent: "Asia" },
            // South America
            { name: "Caracas", lat: 10.4806, lon: -66.9036, offset: -4, flag: "ve", continent: "South America" },
            // Africa
            { name: "Khartoum", lat: 15.5007, lon: 32.5599, offset: 2, flag: "sd", continent: "Africa" },
            // Oceania
            { name: "Hobart", lat: -42.8821, lon: 147.3272, offset: 10, flag: "au", continent: "Oceania" },
            // North America
            { name: "Dallas", lat: 32.7767, lon: -96.7970, offset: -5, flag: "us", continent: "North America" },
            // Europe
            { name: "Helsinki", lat: 60.1699, lon: 24.9384, offset: 3, flag: "fi", continent: "Europe" },
            // Asia
            { name: "Kuala Lumpur", lat: 3.1390, lon: 101.6869, offset: 8, flag: "my", continent: "Asia" },
            // South America
            { name: "Medellin", lat: 6.2442, lon: -75.5812, offset: -5, flag: "co", continent: "South America" },
            // Africa
            { name: "Addis Ababa", lat: 9.02497, lon: 38.7469, offset: 3, flag: "et", continent: "Africa" },
            // Oceania
            { name: "Noumea", lat: -22.2711, lon: 166.4418, offset: 11, flag: "nc", continent: "Oceania" },
            // North America
            { name: "Atlanta", lat: 33.7490, lon: -84.3880, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Copenhagen", lat: 55.6761, lon: 12.5683, offset: 2, flag: "dk", continent: "Europe" },
            // Asia
            { name: "Shanghai", lat: 31.2304, lon: 121.4737, offset: 8, flag: "cn", continent: "Asia" },
            // South America
            { name: "Cali", lat: 3.4516, lon: -76.5320, offset: -5, flag: "co", continent: "South America" },
            // Africa
            { name: "Dar es Salaam", lat: -6.7924, lon: 39.2083, offset: 3, flag: "tz", continent: "Africa" },
            // Oceania
            { name: "Port Moresby", lat: -9.4438, lon: 147.1803, offset: 10, flag: "pg", continent: "Oceania" },
            // North America
            { name: "Denver", lat: 39.7392, lon: -104.9903, offset: -6, flag: "us", continent: "North America" },
            // Europe
            { name: "Dublin", lat: 53.3498, lon: -6.2603, offset: 1, flag: "ie", continent: "Europe" },
            // Asia
            { name: "Taipei", lat: 25.0330, lon: 121.5654, offset: 8, flag: "tw", continent: "Asia" },
            // South America
            { name: "Guayaquil", lat: -2.2058, lon: -79.9079, offset: -5, flag: "ec", continent: "South America" },
            // Africa
            { name: "Kampala", lat: 0.3476, lon: 32.5825, offset: 3, flag: "ug", continent: "Africa" },
            // Oceania
            { name: "Suva", lat: -18.1248, lon: 178.4501, offset: 12, flag: "fj", continent: "Oceania" },
            // North America
            { name: "Phoenix", lat: 33.4484, lon: -112.0740, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Lisbon", lat: 38.7223, lon: -9.1393, offset: 1, flag: "pt", continent: "Europe" },
            // Asia
            { name: "Hanoi", lat: 21.0278, lon: 105.8342, offset: 7, flag: "vn", continent: "Asia" },
            // South America
            { name: "Santa Cruz", lat: -17.8146, lon: -63.1561, offset: -4, flag: "bo", continent: "South America" },
            // Africa
            { name: "Luanda", lat: -8.8390, lon: 13.2894, offset: 1, flag: "ao", continent: "Africa" },
            // Oceania
            { name: "Nadi", lat: -17.7765, lon: 177.4356, offset: 12, flag: "fj", continent: "Oceania" },
            // North America
            { name: "Las Vegas", lat: 36.1699, lon: -115.1398, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Athens", lat: 37.9838, lon: 23.7275, offset: 3, flag: "gr", continent: "Europe" },
            // Asia
            { name: "Ho Chi Minh City", lat: 10.8231, lon: 106.6297, offset: 7, flag: "vn", continent: "Asia" },
            // South America
            { name: "Cordoba", lat: -31.4201, lon: -64.1888, offset: -3, flag: "ar", continent: "South America" },
            // Africa
            { name: "Abidjan", lat: 5.3599, lon: -4.0083, offset: 0, flag: "ci", continent: "Africa" },
            // Oceania
            { name: "Apia", lat: -13.8507, lon: -171.7514, offset: 13, flag: "ws", continent: "Oceania" },
            // North America
            { name: "San Diego", lat: 32.7157, lon: -117.1611, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Budapest", lat: 47.4979, lon: 19.0402, offset: 2, flag: "hu", continent: "Europe" },
            // Asia
            { name: "Karachi", lat: 24.8607, lon: 67.0011, offset: 5, flag: "pk", continent: "Asia" },
            // South America
            { name: "Rosario", lat: -32.9468, lon: -60.6393, offset: -3, flag: "ar", continent: "South America" },
            // Africa
            { name: "Dakar", lat: 14.6928, lon: -17.4467, offset: 0, flag: "sn", continent: "Africa" },
            // Oceania
            { name: "Honiara", lat: -9.4456, lon: 159.9729, offset: 11, flag: "sb", continent: "Oceania" },
            // North America
            { name: "Montreal", lat: 45.5017, lon: -73.5673, offset: -4, flag: "ca", continent: "North America" },
            // Europe
            { name: "Prague", lat: 50.0755, lon: 14.4378, offset: 2, flag: "cz", continent: "Europe" },
            // Asia
            { name: "Lahore", lat: 31.5497, lon: 74.3436, offset: 5, flag: "pk", continent: "Asia" },
            // South America
            { name: "Salvador", lat: -12.9714, lon: -38.5014, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Bamako", lat: 12.6392, lon: -8.0029, offset: 0, flag: "ml", continent: "Africa" },
            // Oceania
            { name: "Port Vila", lat: -17.7333, lon: 168.3273, offset: 11, flag: "vu", continent: "Oceania" },
            // North America
            { name: "Calgary", lat: 51.0447, lon: -114.0719, offset: -6, flag: "ca", continent: "North America" },
            // Europe
            { name: "Warsaw", lat: 52.2297, lon: 21.0122, offset: 2, flag: "pl", continent: "Europe" },
            // Asia
            { name: "Dhaka", lat: 23.8103, lon: 90.4125, offset: 6, flag: "bd", continent: "Asia" },
            // South America
            { name: "Fortaleza", lat: -3.7319, lon: -38.5267, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Ouagadougou", lat: 12.3714, lon: -1.5197, offset: 0, flag: "bf", continent: "Africa" },
            // Oceania
            { name: "Tongatapu", lat: -21.1393, lon: -175.2049, offset: 13, flag: "to", continent: "Oceania" },
            // North America
            { name: "Ottawa", lat: 45.4215, lon: -75.6972, offset: -4, flag: "ca", continent: "North America" },
            // Europe
            { name: "Zurich", lat: 47.3769, lon: 8.5417, offset: 2, flag: "ch", continent: "Europe" },
            // Asia
            { name: "Colombo", lat: 6.9271, lon: 79.8612, offset: 5.5, flag: "lk", continent: "Asia" },
            // South America
            { name: "Recife", lat: -8.0476, lon: -34.8770, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Kinshasa", lat: -4.4419, lon: 15.2663, offset: 1, flag: "cd", continent: "Africa" },
            // North America
            { name: "Edmonton", lat: 53.5444, lon: -113.4909, offset: -6, flag: "ca", continent: "North America" },
            // Europe
            { name: "Brussels", lat: 50.8503, lon: 4.3517, offset: 2, flag: "be", continent: "Europe" },
            // Asia
            { name: "Kathmandu", lat: 27.7172, lon: 85.3240, offset: 5.75, flag: "np", continent: "Asia" },
            // South America
            { name: "Belo Horizonte", lat: -19.9167, lon: -43.9345, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Harare", lat: -17.8252, lon: 31.0335, offset: 2, flag: "zw", continent: "Africa" },
            // North America
            { name: "Winnipeg", lat: 49.8951, lon: -97.1384, offset: -5, flag: "ca", continent: "North America" },
            // Europe
            { name: "Munich", lat: 48.1351, lon: 11.5820, offset: 2, flag: "de", continent: "Europe" },
            // Asia
            { name: "Ulaanbaatar", lat: 47.8864, lon: 106.9057, offset: 8, flag: "mn", continent: "Asia" },
            // South America
            { name: "Porto Alegre", lat: -30.0346, lon: -51.2177, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Lusaka", lat: -15.3875, lon: 28.3228, offset: 2, flag: "zm", continent: "Africa" },
            // North America
            { name: "Quebec City", lat: 46.8139, lon: -71.2080, offset: -4, flag: "ca", continent: "North America" },
            // Europe
            { name: "Milan", lat: 45.4642, lon: 9.1900, offset: 2, flag: "it", continent: "Europe" },
            // Asia
            { name: "Tashkent", lat: 41.2995, lon: 69.2401, offset: 5, flag: "uz", continent: "Asia" },
            // South America
            { name: "Curitiba", lat: -25.4290, lon: -49.2671, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Maputo", lat: -25.9692, lon: 32.5732, offset: 2, flag: "mz", continent: "Africa" },
            // North America
            { name: "Havana", lat: 23.1136, lon: -82.3666, offset: -4, flag: "cu", continent: "North America" },
            // Europe
            { name: "Barcelona", lat: 41.3851, lon: 2.1734, offset: 2, flag: "es", continent: "Europe" },
            // Asia
            { name: "Riyadh", lat: 24.7136, lon: 46.6753, offset: 3, flag: "sa", continent: "Asia" },
            // South America
            { name: "Manaus", lat: -3.1190, lon: -60.0217, offset: -4, flag: "br", continent: "South America" },
            // Africa
            { name: "Antananarivo", lat: -18.8792, lon: 47.5079, offset: 3, flag: "mg", continent: "Africa" },
            // North America
            { name: "San Juan", lat: 18.4655, lon: -66.1057, offset: -4, flag: "pr", continent: "North America" },
            // Europe
            { name: "Kyiv", lat: 50.4501, lon: 30.5234, offset: 3, flag: "ua", continent: "Europe" },
            // Asia
            { name: "Doha", lat: 25.2854, lon: 51.5310, offset: 3, flag: "qa", continent: "Asia" },
            // South America
            { name: "Belem", lat: -1.4558, lon: -48.4902, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Mogadishu", lat: 2.0469, lon: 45.3182, offset: 3, flag: "so", continent: "Africa" },
            // North America
            { name: "Philadelphia", lat: 39.9526, lon: -75.1652, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Belgrade", lat: 44.7866, lon: 20.4489, offset: 2, flag: "rs", continent: "Europe" },
            // Asia
            { name: "Abu Dhabi", lat: 24.4539, lon: 54.3773, offset: 4, flag: "ae", continent: "Asia" },
            // South America
            { name: "Goiania", lat: -16.6869, lon: -49.2648, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Kigali", lat: -1.9441, lon: 30.0619, offset: 2, flag: "rw", continent: "Africa" },
            // North America
            { name: "Portland", lat: 45.5152, lon: -122.6784, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Sofia", lat: 42.6977, lon: 23.3219, offset: 3, flag: "bg", continent: "Europe" },
            // Asia
            { name: "Muscat", lat: 23.5859, lon: 58.4059, offset: 4, flag: "om", continent: "Asia" },
            // South America
            { name: "Campinas", lat: -22.9056, lon: -47.0608, offset: -3, flag: "br", continent: "South America" },
            // Africa
            { name: "Yaounde", lat: 3.8480, lon: 11.5021, offset: 1, flag: "cm", continent: "Africa" },
            // North America
            { name: "Austin", lat: 30.2672, lon: -97.7431, offset: -5, flag: "us", continent: "North America" },
            // Europe
            { name: "Bucharest", lat: 44.4268, lon: 26.1025, offset: 3, flag: "ro", continent: "Europe" },
            // Asia
            { name: "Amman", lat: 31.9539, lon: 35.9106, offset: 3, flag: "jo", continent: "Asia" },
            // South America
            { name: "Maracaibo", lat: 10.6545, lon: -71.7234, offset: -4, flag: "ve", continent: "South America" },
            // Africa
            { name: "Douala", lat: 4.0511, lon: 9.7679, offset: 1, flag: "cm", continent: "Africa" },
            // North America
            { name: "Nashville", lat: 36.1627, lon: -86.7816, offset: -5, flag: "us", continent: "North America" },
            // Europe
            { name: "Hamburg", lat: 53.5511, lon: 9.9937, offset: 2, flag: "de", continent: "Europe" },
            // Asia
            { name: "Kuwait City", lat: 29.3759, lon: 47.9774, offset: 3, flag: "kw", continent: "Asia" },
            // South America
            { name: "Valencia", lat: 10.1579, lon: -67.9972, offset: -4, flag: "ve", continent: "South America" },
            // Africa
            { name: "Niamey", lat: 13.5116, lon: 2.1254, offset: 1, flag: "ne", continent: "Africa" },
            // North America
            { name: "Charlotte", lat: 35.2271, lon: -80.8431, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Frankfurt", lat: 50.1109, lon: 8.6821, offset: 2, flag: "de", continent: "Europe" },
            // Asia
            { name: "Manama", lat: 26.2235, lon: 50.5876, offset: 3, flag: "bh", continent: "Asia" },
            // South America
            { name: "Barquisimeto", lat: 10.0647, lon: -69.3570, offset: -4, flag: "ve", continent: "South America" },
            // Africa
            { name: "N'Djamena", lat: 12.1348, lon: 15.0557, offset: 1, flag: "td", continent: "Africa" },
            // North America
            { name: "Minneapolis", lat: 44.9778, lon: -93.2650, offset: -5, flag: "us", continent: "North America" },
            // Europe
            { name: "Stuttgart", lat: 48.7758, lon: 9.1829, offset: 2, flag: "de", continent: "Europe" },
            // Asia
            { name: "Jerusalem", lat: 31.7683, lon: 35.2137, offset: 3, flag: "il", continent: "Asia" },
            // North America
            { name: "Detroit", lat: 42.3314, lon: -83.0458, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Geneva", lat: 46.2044, lon: 6.1432, offset: 2, flag: "ch", continent: "Europe" },
            // Asia
            { name: "Tehran", lat: 35.6892, lon: 51.3890, offset: 3.5, flag: "ir", continent: "Asia" },
            // North America
            { name: "Orlando", lat: 28.5383, lon: -81.3792, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Reykjavik", lat: 64.1466, lon: -21.9426, offset: 0, flag: "is", continent: "Europe" },
            // Asia
            { name: "Baghdad", lat: 33.3152, lon: 44.3661, offset: 3, flag: "iq", continent: "Asia" },
            // North America
            { name: "Tampa", lat: 27.9506, lon: -82.4572, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Tallinn", lat: 59.4370, lon: 24.7535, offset: 3, flag: "ee", continent: "Europe" },
            // Asia
            { name: "Kabul", lat: 34.5553, lon: 69.2075, offset: 4.5, flag: "af", continent: "Asia" },
            // North America
            { name: "St. Louis", lat: 38.6270, lon: -90.1994, offset: -5, flag: "us", continent: "North America" },
            // Europe
            { name: "Riga", lat: 56.9496, lon: 24.1052, offset: 3, flag: "lv", continent: "Europe" },
            // Asia
            { name: "Pyongyang", lat: 39.0392, lon: 125.7625, offset: 9, flag: "kp", continent: "Asia" },
            // North America
            { name: "Pittsburgh", lat: 40.4406, lon: -79.9959, offset: -4, flag: "us", continent: "North America" },
            // Europe
            { name: "Vilnius", lat: 54.6872, lon: 25.2797, offset: 3, flag: "lt", continent: "Europe" },
            // Asia
            { name: "Yangon", lat: 16.8409, lon: 96.1735, offset: 6.5, flag: "mm", continent: "Asia" },
            // North America
            { name: "Sacramento", lat: 38.5816, lon: -121.4944, offset: -7, flag: "us", continent: "North America" },
            // Europe
            { name: "Luxembourg", lat: 49.6116, lon: 6.1319, offset: 2, flag: "lu", continent: "Europe" },
            // Asia
            { name: "Phnom Penh", lat: 11.5564, lon: 104.9282, offset: 7, flag: "kh", continent: "Asia" },
            // North America
            { name: "Raleigh", lat: 35.7796, lon: -78.6382, offset: -4, flag: "us", continent: "North America" },
            // Asia
            { name: "Vientiane", lat: 17.9757, lon: 102.6331, offset: 7, flag: "la", continent: "Asia" },
            // North America
            { name: "Cincinnati", lat: 39.1031, lon: -84.5120, offset: -4, flag: "us", continent: "North America" },
            // Asia
            { name: "Surabaya", lat: -7.2575, lon: 112.7521, offset: 7, flag: "id", continent: "Asia" },
            // North America
            { name: "Anchorage", lat: 61.2181, lon: -149.9003, offset: -8, flag: "us", continent: "North America" },
            // Asia
            { name: "Bandung", lat: -6.9175, lon: 107.6191, offset: 7, flag: "id", continent: "Asia" }
        ];

        let weatherData = {};
        const CACHE_DURATION = 30 * 60 * 1000; // 30 minutes cache
        let displayedCount = 0;
        const LOAD_CHUNK = 49; // 7 continents x 7 cities
        let clocks = [];

        async function fetchWeatherChunk(citiesChunk, retries = 3) {
            const promises = citiesChunk.map(city => fetchWeather(city, retries));
            return await Promise.all(promises);
        }

        async function fetchWeather(city, retries = 3) {
            const cached = localStorage.getItem(`weather_${city.name}`);
            let cachedData = cached ? JSON.parse(cached) : null;
            if (cachedData && Date.now() - cachedData.timestamp < CACHE_DURATION) {
                return cachedData.data;
            }

            const url = `https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current_weather=true&hourly=relativehumidity_2m&timezone=auto`;
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const data = await response.json();
                    const weatherCode = data.current_weather.weathercode;
                    const weatherIcon = getWeatherIcon(weatherCode);
                    const weather = {
                        temperature: data.current_weather.temperature,
                        humidity: data.hourly.relativehumidity_2m[0],
                        weatherIcon: weatherIcon
                    };
                    localStorage.setItem(`weather_${city.name}`, JSON.stringify({
                        data: weather,
                        timestamp: Date.now()
                    }));
                    return weather;
                } catch (error) {
                    console.error(`Attempt ${i + 1} failed for ${city.name}: ${error.message}, URL: ${url}`);
                    if (i === retries - 1) {
                        if (cachedData) {
                            console.warn(`Using expired cache for ${city.name}`);
                            return cachedData.data;
                        }
                        return { temperature: "N/A", humidity: "N/A", weatherIcon: "‚ùì" };
                    }
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }
        }

        function getWeatherIcon(code) {
            if (code === 0) return "‚òÄÔ∏è";
            if (code <= 3) return "‚õÖ";
            if (code <= 67) return "üåßÔ∏è";
            if (code <= 77) return "‚ùÑÔ∏è";
            return "üå©Ô∏è";
        }

        async function initializeWeather(citiesToLoad) {
            const chunkSize = 10;
            for (let i = 0; i < citiesToLoad.length; i += chunkSize) {
                const chunk = citiesToLoad.slice(i, i + chunkSize);
                const results = await fetchWeatherChunk(chunk);
                chunk.forEach((city, index) => {
                    weatherData[city.name] = results[index];
                    const clock = clocks.find(c => c.city.name === city.name);
                    if (clock) {
                        updateClock(clock.clock, clock.city.offset, weatherData[city.name]);
                    }
                });
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        async function updateWeather() {
            const chunkSize = 10;
            for (let i = 0; i < cities.length; i += chunkSize) {
                const chunk = cities.slice(i, i + chunkSize);
                const results = await fetchWeatherChunk(chunk);
                chunk.forEach((city, index) => {
                    weatherData[city.name] = results[index];
                });
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        function createClock(city) {
            const container = document.getElementById("clocks-container");
            const clockDiv = document.createElement("div");
            clockDiv.className = "clock-container";
            clockDiv.dataset.continent = city.continent;
            clockDiv.innerHTML = `
                <div class="city-header">
                    <img class="flag-img" src="https://flagcdn.com/24x18/${city.flag}.png" alt="${city.flag}">
                    <div class="city-name">${city.name}</div>
                </div>
                <div class="digital-clock"></div>
                <div class="weather-info loading">Weather: Loading</div>
            `;
            container.appendChild(clockDiv);
            return clockDiv;
        }

        function createFilterButtons() {
            const continents = ["All", "Asia", "Europe", "N America", "S America", "Africa", "Oceania"];
            const container = document.getElementById("filter-buttons");
            continents.forEach(continent => {
                const btn = document.createElement("button");
                btn.className = "filter-btn";
                btn.textContent = continent;
                btn.dataset.continent = continent === "All" ? "" : continent.replace("N ", "North ").replace("S ", "South ");
                btn.addEventListener("click", () => {
                    document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
                    btn.classList.add("active");
                    filterClocks(continent === "All" ? "All" : continent.replace("N ", "North ").replace("S ", "South "));
                });
                container.appendChild(btn);
            });
            document.querySelector(".filter-btn").classList.add("active");
        }

        function filterClocks(continent) {
            const clocks = document.querySelectorAll(".clock-container");
            clocks.forEach(clock => {
                if (continent === "All") {
                    clock.style.display = "block";
                } else {
                    clock.style.display = clock.dataset.continent === continent ? "block" : "none";
                }
            });
        }

        function updateClock(clock, offset, weather) {
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const localTime = new Date(utc + (3600000 * offset));

            const hours = localTime.getHours();
            const minutes = localTime.getMinutes();
            const seconds = localTime.getSeconds();

            const displayHours = hours < 10 ? `0${hours}` : hours;
            const displayMinutes = minutes < 10 ? `0${minutes}` : minutes;
            const displaySeconds = seconds < 10 ? `0${seconds}` : seconds;
            clock.querySelector(".digital-clock").innerHTML = `${displayHours}:${displayMinutes}:<span class="seconds">${displaySeconds}</span>`;

            clock.querySelector(".weather-info").classList.remove("loading");
            clock.querySelector(".weather-info").innerHTML = weather.temperature !== "N/A" ?
                `Weather: <span class="weather-icon">${weather.weatherIcon}</span> <span class="temperature">${weather.temperature}¬∞C</span>, Humidity: <span class="humidity">${weather.humidity}%</span>` : "Weather: N/A";
        }

        function updateAll() {
            clocks.forEach(({ clock, city }) => {
                updateClock(clock, city.offset, weatherData[city.name] || { temperature: "N/A", humidity: "N/A", weatherIcon: "‚ùì" });
            });
        }

        // Ï¥àÍ∏∞ Î°úÎìú Î∞è ÎçîÎ≥¥Í∏∞ Í∏∞Îä•
        function loadClocks() {
            const citiesToLoad = cities.slice(displayedCount, displayedCount + LOAD_CHUNK);
            if (citiesToLoad.length === 0) {
                document.getElementById("load-more").style.display = "none";
                return;
            }

            const newClocks = citiesToLoad.map(city => ({ clock: createClock(city), city }));
            clocks.push(...newClocks);
            displayedCount += citiesToLoad.length;

            // ÎçîÎ≥¥Í∏∞ Î≤ÑÌäº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            if (displayedCount >= cities.length) {
                document.getElementById("load-more").style.display = "none";
            }

            // ÏãúÍ≥Ñ ÏÉâÏÉÅ Ï†ÅÏö©
            newClocks.forEach(({ clock, city }) => {
                const continent = clock.dataset.continent;
                const color = continentColors[continent] || "#000000";
                clock.querySelector(".digital-clock").style.color = color;
            });

            // ÎÇ†Ïî® Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
            initializeWeather(citiesToLoad).then(() => {
                updateAll();
            }).catch(error => {
                console.error("Failed to initialize weather for chunk:", error);
                newClocks.forEach(({ clock }) => {
                    clock.querySelector(".weather-info").classList.remove("loading");
                    clock.querySelector(".weather-info").innerHTML = "Weather: N/A";
                });
            });

            // Ï†ÑÏ≤¥ ÌôîÎ©¥ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä
            newClocks.forEach(({ clock }) => {
                clock.addEventListener("click", () => {
                    if (window.innerWidth <= 600) return;

                    if (clock.classList.contains("fullscreen")) {
                        clock.classList.remove("fullscreen");
                        const closeBtn = clock.querySelector(".close-btn");
                        if (closeBtn) closeBtn.remove();
                        const tooltip = clock.querySelector(".fullscreen-tooltip");
                        if (tooltip) tooltip.remove();
                        document.querySelectorAll(".clock-container").forEach(c => {
                            if (c !== clock) c.style.display = "block";
                        });
                    } else {
                        document.querySelectorAll(".clock-container").forEach(c => c.classList.remove("fullscreen"));
                        clock.classList.add("fullscreen");
                        document.querySelectorAll(".clock-container").forEach(c => {
                            if (c !== clock) c.style.display = "none";
                        });
                        const closeBtn = document.createElement("button");
                        closeBtn.className = "close-btn";
                        closeBtn.textContent = "Close";
                        clock.appendChild(closeBtn);
                        closeBtn.addEventListener("click", (e) => {
                            e.stopPropagation();
                            clock.classList.remove("fullscreen");
                            closeBtn.remove();
                            const tooltip = clock.querySelector(".fullscreen-tooltip");
                            if (tooltip) tooltip.remove();
                            document.querySelectorAll(".clock-container").forEach(c => {
                                if (c !== clock) c.style.display = "block";
                            });
                        });

                        const tooltip = document.createElement("div");
                        tooltip.className = "fullscreen-tooltip";
                        tooltip.textContent = "Click again to close";
                        clock.appendChild(tooltip);
                        setTimeout(() => tooltip.remove(), 3000);
                    }
                });
            });
        }

        // Ï¥àÍ∏∞ Î°úÎìú
        createFilterButtons();
        loadClocks();

        // ÎçîÎ≥¥Í∏∞ Î≤ÑÌäº Ïù¥Î≤§Ìä∏
        document.getElementById("load-more").addEventListener("click", () => {
            loadClocks();
        });

        // Í≤ÄÏÉâ Í∏∞Îä•
        const searchInput = document.getElementById("city-search");
        const searchBtn = document.getElementById("search-btn");
        const suggestions = document.getElementById("city-suggestions");

        // ÏûêÎèôÏôÑÏÑ± Îç∞Ïù¥ÌÑ∞Î¶¨Ïä§Ìä∏ ÏÉùÏÑ±
        cities.forEach(city => {
            const option = document.createElement("option");
            option.value = city.name;
            suggestions.appendChild(option);
        });

        function performSearch() {
            const query = searchInput.value.toLowerCase();
            const clocks = document.querySelectorAll(".clock-container");
            clocks.forEach(clock => {
                const cityName = clock.querySelector(".city-name").textContent.toLowerCase();
                clock.style.display = cityName.includes(query) ? "block" : "none";
            });
            document.getElementById("load-more").style.display = query ? "none" : (displayedCount < cities.length ? "block" : "none");
        }

        searchInput.addEventListener("input", performSearch);
        searchInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
                performSearch();
            }
        });
        searchBtn.addEventListener("click", performSearch);

        updateAll();
        setInterval(updateAll, 1000);

        updateWeather().then(() => {
            setInterval(updateWeather, 30 * 60 * 1000);
        }).catch(error => {
            console.error("Failed to update weather:", error);
        });

        document.querySelectorAll(".accordion-header").forEach(header => {
            header.addEventListener("click", () => {
                const content = header.nextElementSibling;
                const isOpen = header.classList.contains("active");

                document.querySelectorAll(".accordion-header").forEach(h => {
                    h.classList.remove("active");
                    h.nextElementSibling.style.maxHeight = null;
                    h.nextElementSibling.style.padding = "0 15px";
                });

                if (!isOpen) {
                    header.classList.add("active");
                    content.style.maxHeight = content.scrollHeight + "px";
                    content.style.padding = "15px";
                }
            });
        });

        // ÏãúÍ≥Ñ ÏÉâÏÉÅ ÎèôÏ†Å Ï†ÅÏö©
        const continentColors = {
            "North America": "#388E3C", // Ï¥àÎ°ù
            "Europe": "#FBC02D",        // ÎÖ∏Îûë
            "Asia": "#F57C00",          // Ï£ºÌô©
            "South America": "#1976D2", // ÌååÎûë
            "Africa": "#303F9F",        // ÎÇ®ÏÉâ
            "Oceania": "#7B1FA2"        // Î≥¥Îùº
        };
    </script>
</body>
</html>